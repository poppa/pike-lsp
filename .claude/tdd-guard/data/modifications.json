{
  "session_id": "9f0abf17-6aab-4f40-a3d2-d64d14eb51a5",
  "transcript_path": "/home/smuks/.claude/projects/-home-smuks-OpenCode-pike-lsp/9f0abf17-6aab-4f40-a3d2-d64d14eb51a5.jsonl",
  "hook_event_name": "PreToolUse",
  "tool_name": "Edit",
  "tool_input": {
    "file_path": "/home/smuks/OpenCode/pike-lsp/packages/pike-lsp-server/src/features/navigation/definition.ts",
    "old_string": "                        // Fall back to stdlib index for import/inherit statements\n                        const moduleInfo = await services.stdlibIndex?.getModule(modulePath);\n\n                        if (moduleInfo && moduleInfo.resolvedPath) {\n                            const targetUri = moduleInfo.resolvedPath.startsWith('file://')\n                                ? moduleInfo.resolvedPath\n                                : `file://${moduleInfo.resolvedPath}`;\n\n                            return {\n                                uri: targetUri,\n                                range: {\n                                    start: { line: 0, character: 0 },\n                                    end: { line: 0, character: 0 },\n                                },\n                            };\n                        }",
    "new_string": "                        // Fall back to stdlib index for import/inherit statements\n                        // Check if this is a relative path (starts with .)\n                        if (modulePath.startsWith('.') && services.bridge?.bridge) {\n                            try {\n                                const relativeResult = await services.bridge.bridge.resolveInclude(\n                                    modulePath,\n                                    uri\n                                );\n\n                                if (relativeResult.exists && relativeResult.path) {\n                                    const targetUri = relativeResult.path.startsWith('file://')\n                                        ? relativeResult.path\n                                        : `file://${relativeResult.path}`;\n\n                                    return {\n                                        uri: targetUri,\n                                        range: {\n                                            start: { line: 0, character: 0 },\n                                            end: { line: 0, character: 0 },\n                                        },\n                                    };\n                                }\n                            } catch (err) {\n                                log.debug('Definition: failed to resolve relative path', {\n                                    modulePath,\n                                    error: err instanceof Error ? err.message : String(err),\n                                });\n                            }\n                        }\n\n                        const moduleInfo = await services.stdlibIndex?.getModule(modulePath);\n\n                        if (moduleInfo && moduleInfo.resolvedPath) {\n                            const targetUri = moduleInfo.resolvedPath.startsWith('file://')\n                                ? moduleInfo.resolvedPath\n                                : `file://${moduleInfo.resolvedPath}`;\n\n                            return {\n                                uri: targetUri,\n                                range: {\n                                    start: { line: 0, character: 0 },\n                                    end: { line: 0, character: 0 },\n                                },\n                            };\n                        }",
    "replace_all": false
  }
}